<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Cell.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Cell.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
var redis = require("redis"),
    transport = require("./transport/eve.js")


/**
 * Base Class for a Cell
 * Every further Component is inherited by this cell
 * 
 * @class Cell
 * @param {String} id ID of the Cell
 * @param {Object} options Parameter of the Cell
 */
class Cell {

    constructor(id, options) {
        options = options || {};
        this.options = options;
        this.parent = options.parent;
        console.log("Create Cell")
        this.id = id;
        this.transport = new transport(id);
        this.childs = [];
        if (this.parent !== undefined) {
            this.sendMessage(this.parent, "ready", {})
        }

        this.on("remove", this.onChildRemoved.bind(this));
        this.on("ready", this.onChildReady.bind(this));
    }

    _onError(err) {
        console.log("Error " + err);
    }


    /**
     * Adding an event handler
     * 
     * @param {any} event Type of the event
     * @callback callback callback Function
     * @param {String} from sender of the message
     * @param {Object} data
     * 
     * @memberof Cell
     */
    on(event, callback) {
        this.transport.on(event, callback)
    }


    /**
     * 
     * 
     * @param {any} event Type of the event
     * @callback callback callback Function
     * @param {String} from sender of the message
     * @param {Object} data
     * 
     * @memberof Cell
     */
    off(event, callback) {
        this.transport.off(event, callback);
    }


    /**
     * Sent a message to another cell
     * 
     * @param {String} rec Receiver of the message
     * @param {String} type Type of the message
     * @param {any} message Content of the Message
     * 
     * @memberof Cell
     */
    sendMessage(rec, type, message) {
        this.transport.sendMessage(rec, type, message);
    };


    /**
     * Create a new Child Cell
     * 
     * @param {any} name ID of the Cell
     * @param {any} type Type of the Cell
     * @param {any} options 
     * 
     * @memberof Cell
     */
    createChild(name, type, options) {
        var data = {
            name: name,
            type: type,
            options: options || {}

        }
        data.options.parent = this.id;
        this.sendMessage("Manager", "createCell", data);
        this.childs.push(name);

    }

    /**
     * Is called when a child got removed
     * 
     * @param {any} from Sender of the message
     * @param {any} data child data
     * 
     * @memberof Cell
     */
    onChildRemoved(from, data) {
        var idx = this.childs.indexOf(from);
        if (idx >= 0) {
            this.childs.splice(idx, 1);
        }

    }

    /**
     * Is called when a child is ready
     * 
     * @param {any} from Sender of the message
     * @param {any} data 
     * 
     * @memberof Cell
     */
    onChildReady(from, data) {
        console.log("child ready", from);
    }

    /**
     * Destructor of the class
     * 
     * 
     * @memberof Cell
     */
    destructor() {
        for (let i = 0; i &lt; this.childs.length; i++) {
            this.sendMessage("Manager", "deleteCell", { name: this.childs[i] });
        }
        if (this.parent !== undefined) {
            this.sendMessage(this.parent, "remove", {});
        }
        console.log("remove Object", this.id);
    };
}


module.exports = Cell;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Ant.html">Ant</a></li><li><a href="Cell.html">Cell</a></li><li><a href="Environment.html">Environment</a></li><li><a href="Manager.html">Manager</a></li><li><a href="WorkerNode.html">WorkerNode</a></li></ul><h3>Global</h3><ul><li><a href="global.html#EveAgentTransport">EveAgentTransport</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Jun 15 2017 18:16:21 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
